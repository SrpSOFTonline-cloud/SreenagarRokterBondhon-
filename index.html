<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sreenagar Rokter Bondhon</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#f4f4f4;padding-bottom:85px}

/* HEADER */
.header{
  background:#d71920;
  color:white;
  padding:10px;
  text-align:center;
  font-size:18px;
  position:relative;
  z-index:10;
  height:65px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.menuBtn{
  position:absolute;
  left:15px;
  top:20px;
  font-size:22px;
  cursor:pointer;
  font-weight:normal;
}

/* LOGO STYLE */
.header-logo{
  width: 45px;
  height: 45px;
  object-fit: cover;
  border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  border: 2px solid white;
}

/* APP NAME */
.appName{
  text-align:center;
  font-size:24px;
  color:#d71920;
  font-weight:bold;
  margin-bottom:15px;
}

/* COMMON */
.container{padding:15px}
.card{
  background:white;
  border-radius:10px;
  padding:20px;
  box-shadow:0 2px 6px rgba(0,0,0,.2);
  margin-bottom:15px;
}
h2{text-align:center;color:#555;margin-bottom:15px}

input,select,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:1px solid #ccc;
  border-radius:6px;
}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:6px;
  background:#d71920;
  color:white;
  margin-top:10px;
  font-size:16px;
  cursor:pointer;
}
button:hover{background:#b01518;}

/* OVERLAY */
.overlay{
  position:fixed; left:0; top:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  z-index:998; display:none;
}

/* DRAWER */
.menu{
  position:fixed; left:-260px; top:0;
  width:250px; height:100%;
  background:white;
  transition:.3s;
  box-shadow:2px 0 8px rgba(0,0,0,.3);
  z-index:999;
}
.menu.active{left:0}
.menu h3{background:#d71920; color:white; padding:20px; margin:0;}
.menu a{
  display:block; padding:16px 20px;
  border-bottom:1px solid #eee;
  cursor:pointer; color:#333; text-decoration:none;
}

/* HOME INFO BOX */
.info-box{
  background:#fff3cd;
  border-left:5px solid #d71920;
  padding:15px;
  margin-bottom:15px;
  border-radius:5px;
}
.info-box h3{color:#856404; margin-bottom:5px;}

/* FACEBOOK CARD */
.fb-card{
  background:#1877F2;
  color:white;
  border-radius:10px;
  padding:20px;
  margin-bottom:15px;
  box-shadow:0 2px 6px rgba(0,0,0,.2);
  cursor:pointer;
  text-align:center;
}
.fb-card:hover{background:#165db6;}

.hidden{display:none}

/* FOOTER */
.footer{
  position:fixed; bottom:0; left:0;
  width:100%; background:#111;
  color:white; text-align:center;
  padding:10px; font-size:13px;
  line-height:1.5; z-index:10;
}

/* SPLASH LOGO */
.splash-logo-container {
    width: 160px;
    aspect-ratio: 1 / 1;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
}
.splash-logo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    border: 4px solid #d71920;
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash" style="height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#eee">
  
  <!-- LOGO CONTAINER -->
  <div class="splash-logo-container">
    <!-- Updated Image URL -->
    <img src="https://z-cdn-media.chatglm.cn/files/3bd2ac78-e146-4d71-b99d-ac64f35f4bf9.jpg?auth_key=1871394197-effa948b636c4ab781ba1fcfe3fa18d2-0-dba95b4ab61b5cf4ea7d439516b245d9" class="splash-logo" alt="Logo">
  </div>

  <h2 style="color:#d71920; font-size:22px;">Sreenagar Rokter Bondhon</h2>
  <p style="margin-top:10px; color:#777">Loading...</p>
</div>

<!-- APP -->
<div id="app" class="hidden">

<div class="header">
  <span class="menuBtn" onclick="toggleMenu()">â˜°</span>
  <!-- LOGO IN HEADER - Updated Image URL -->
  <img src="https://z-cdn-media.chatglm.cn/files/3bd2ac78-e146-4d71-b99d-ac64f35f4bf9.jpg?auth_key=1871394197-effa948b636c4ab781ba1fcfe3fa18d2-0-dba95b4ab61b5cf4ea7d439516b245d9" class="header-logo" alt="Logo">
</div>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<!-- MENU -->
<div class="menu" id="menu">
  <h3>Menu</h3>
  <a onclick="openPage('home')">Home</a>
  <a onclick="openPage('request')">Request Blood</a>
  <a onclick="openPage('about')">About Us</a>
  <a href="https://facebook.com/groups/776274101742103/" target="_blank">ðŸ“˜ Join FB Group</a>
</div>

<!-- HOME -->
<div id="home" class="container">
  <div class="card">
    <div class="appName">Sreenagar Rokter Bondhon</div>
    <h2>Welcome</h2>
    <p style="text-align:center; color:#666;">
      Donate Blood, Save Life.
    </p>
  </div>

  <div class="fb-card" onclick="window.open('https://facebook.com/groups/776274101742103/', '_blank')">
    <h3>ðŸ“˜ Join Our Community</h3>
    <p style="font-size:14px; margin-top:5px;">Stay updated & help others.</p>
    <div style="margin-top:10px; background:white; color:#1877F2; padding:8px; border-radius:5px; font-weight:bold; display:inline-block; padding-left:20px; padding-right:20px;">
      Join Group
    </div>
  </div>

  <div class="info-box">
    <h3>Emergency Contact</h3>
    <p>If you need blood urgently, please call us directly.</p>
    <p style="margin-top:10px; font-weight:bold; font-size:22px; color:#d71920;">
      ðŸ“ž 01842655193
    </p>
  </div>
  
  <div class="card">
    <h3 style="margin-bottom:10px; color:#333">How to Request Blood?</h3>
    <p style="color:#555; line-height:1.6">
      1. Click on the menu (â˜°) top left.<br>
      2. Select "Request Blood".<br>
      3. Fill the form and submit.<br>
      4. We will receive your request via Email immediately.
    </p>
  </div>
</div>

<!-- REQUEST -->
<div id="request" class="container hidden">
  <div class="card">
    <h2>Submit Blood Request</h2>
    <p style="text-align:center; color:#777; font-size:12px; margin-bottom:10px;">
      (This form sends email directly to Admin)
    </p>
    <input id="patient" placeholder="Patient Name">
    <input id="location" placeholder="Hospital / Location">
    <input id="reqBlood" placeholder="Blood Group (A+, O-, etc)">
    <input id="reqContact" type="tel" placeholder="Your Contact Number">
    <input id="reqEmail" type="email" placeholder="Your Email (Optional)">
    <button onclick="sendEmailRequest()">Submit Request</button>
  </div>
</div>

<!-- ABOUT -->
<div id="about" class="container hidden">
  <div class="card">
    <h2>About Us</h2>
    <p style="color:#555; line-height:1.6">
      <strong>Sreenagar Rokter Bondhon</strong> is a voluntary blood donation organization.
      <br><br>
      We connect blood donors with patients in need.
      <br><br>
      <strong>Developer:</strong> SRP SOFT LTD.
    </p>
  </div>
  <div class="fb-card" onclick="window.open('https://facebook.com/groups/776274101742103/', '_blank')">
    <h3>ðŸ“˜ Facebook Group</h3>
    <p style="font-size:14px; margin-top:5px;">Join our community for more updates.</p>
  </div>
</div>

</div>

<div class="footer">
  Developer Company: SRP SOFT LTD.<br>
  Hotline: 01842655193
</div>

<!-- EMAILJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
/* ================================
   CONFIGURATION 
   ================================ */

const ADMIN_EMAIL = "omorhosshin@gmail.com"; 

// EmailJS Keys
const EMAILJS_PUBLIC_KEY = "tTDL_g9ChY2fiUl4t";
const EMAILJS_SERVICE_ID = "service_rka3imy";
const EMAILJS_TEMPLATE_ID = "template_5j956tn";

// Initialize EmailJS
if(typeof emailjs !== 'undefined'){
    emailjs.init(EMAILJS_PUBLIC_KEY);
}

/* ================================
   APP LOGIC 
   ================================ */

/* SPLASH */
setTimeout(()=>{
  document.getElementById("splash").style.display="none";
  document.getElementById("app").classList.remove("hidden");
},1500);

/* MENU */
function toggleMenu(){ 
  const menu = document.getElementById("menu");
  const overlay = document.getElementById("overlay");
  menu.classList.toggle("active");
  overlay.style.display = menu.classList.contains("active") ? "block" : "none";
}

function hidePages(){
  ["home","request","about"].forEach(id=>{
    document.getElementById(id).classList.add("hidden");
  });
}

function openPage(id){
  hidePages();
  document.getElementById(id).classList.remove("hidden");
  const menu = document.getElementById("menu");
  if(menu.classList.contains("active")) toggleMenu();
}

/* EMAIL REQUEST FUNCTION */
function sendEmailRequest(){
  const patientVal = document.getElementById("patient").value;
  const locationVal = document.getElementById("location").value;
  const bloodVal = document.getElementById("reqBlood").value;
  const contactVal = document.getElementById("reqContact").value;
  const userEmailVal = document.getElementById("reqEmail").value;

  if(!patientVal || !locationVal || !bloodVal || !contactVal) {
    alert("Please fill all required fields!");
    return;
  }

  // Prepare parameters
  const templateParams = {
    to_email: ADMIN_EMAIL, 
    patient: patientVal, 
    blood: bloodVal,
    location: locationVal, 
    contact: contactVal,
    reply_to: userEmailVal || "Not Provided"
  };

  // Send Email
  if(typeof emailjs !== 'undefined'){
      emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams)
        .then(() => {
          alert("Request Sent Successfully!");
          document.getElementById("patient").value = "";
          document.getElementById("location").value = "";
          document.getElementById("reqBlood").value = "";
          document.getElementById("reqContact").value = "";
          document.getElementById("reqEmail").value = "";
          openPage('home');
        })
        .catch((e) => {
           alert("Failed to send request. Check console.");
           console.error("EmailJS Error:", e);
        });
  } else {
      alert("Email service not loaded.");
  }
}
</script>
</body>
</html>
